---
title: "JavaScript å‹åˆ¥è½‰æ› vs. å‹åˆ¥å¼·åˆ¶è½‰æ›"
description: æ¢ç´¢ JavaScript ä¸­å‹åˆ¥è½‰æ›å’Œå‹åˆ¥å¼·åˆ¶è½‰æ›çš„å·®ç•°
date: 2024-10-20
tags: ["javascript", "fundamentals"]
published: true
language: "zh_tw"
---

ECMAScript ä¸­å‹åˆ¥è½‰æ›çš„å®šç¾©ï¼š

> ECMAScript èªè¨€æœƒæ ¹æ“šéœ€è¦éš±å¼åœ°åŸ·è¡Œè‡ªå‹•å‹åˆ¥è½‰æ›ã€‚ç‚ºäº†é‡æ¸…æŸäº›çµæ§‹çš„èªç¾©ï¼Œå®šç¾©ä¸€çµ„è½‰æ›æŠ½è±¡æ“ä½œæ˜¯å¾ˆæœ‰ç”¨çš„ã€‚è½‰æ›æŠ½è±¡æ“ä½œæ˜¯å¤šæ…‹çš„ï¼›å®ƒå€‘å¯ä»¥æ¥å—ä»»ä½• ECMAScript èªè¨€å‹åˆ¥æˆ–å®Œæˆè¨˜éŒ„å€¼çš„å€¼ã€‚ä½†é€™äº›æ“ä½œä¸ä½¿ç”¨å…¶ä»–è¦ç¯„å‹åˆ¥ã€‚

## è½‰æ›çš„é¡å‹

- éš±å¼è½‰æ› **ï¼ˆä¹Ÿç¨±å‹åˆ¥å¼·åˆ¶è½‰æ›ï¼ˆtype coercionï¼‰**ï¼šé€™æ˜¯é€éä½¿ç”¨æ–¹æ³•è‡ªå‹•å®Œæˆçš„ã€‚
- é¡¯å¼è½‰æ›ï¼š é€™æ˜¯é€éä½¿ç”¨å…§å»ºæ–¹æ³•æˆ–å‡½å¼å®Œæˆçš„ã€‚

### é¡¯å¼è½‰æ› ï¼ˆExplicit Conversionï¼‰

ä»¥ä¸‹æ˜¯å¸¸ç”¨çš„æ–¹æ³•å’Œå…§å»ºå‡½å¼ã€‚

- è½‰æ›ç‚ºå¸ƒæ—å€¼ (ToBoolean)
  - Boolean()
    -Â !!
- è½‰æ›ç‚ºæ•¸å­— (ToNumber)
  - Number()
  - parseInt()
  - parseFloat()
- è½‰æ›ç‚ºå­—ä¸² (ToString)
  - String()
  - toString()

#### è½‰æ›ç‚ºå¸ƒæ—å€¼ (ToBoolean)

```js
// Undefined
let a = undefined;
let bool = Boolean(a);
console.log(bool); // false

// Null
let a = null;
let bool = Boolean(a);
console.log(bool); // false

// boolean
let a = true;
let bool = Boolean(a);
console.log(bool); // true

// Number
let a = 0;
let bool = Boolean(a);
console.log(bool); // false

let a = -0;
let bool = Boolean(a);
console.log(a); // false

let a = NaN;
let bool = Boolean(a);
console.log(a); // false

let a = 1;
let bool = Boolean(a);
console.log(bool); // true

// String
let a = "";
let bool = Boolean(a);
console.log(bool); // false

let a = " ";
let bool = Boolean(a);
console.log(bool); // true

// object
let a = {};
let bool = Boolean(a); // true

// Symbol
let a = Symbol("Hello");
let bool = Boolean(a);
console.log(bool); // true
```

#### è½‰æ›ç‚ºæ•¸å­— (ToNumber)

è½‰æ›ç‚ºæ•¸å­—æœ‰é»è¤‡é›œï¼Œç‰¹åˆ¥æ˜¯ç•¶åƒæ•¸æ˜¯å­—ä¸²å’Œç¬¦è™Ÿï¼ˆSymbolï¼‰æ™‚ã€‚

```js
// Undefined
let value = undefined;
let num = Number(value);
console.log(num); // NaN

// Null
let value = null;
let num = Number(value);
console.log(num); // 0

// Boolean
let value = false;
let num = Number(value);
console.log(num); // 0

let value = ture;
let num = Number(value);
console.log(num); // 1

// Number
let value = 23;
let num = Number(value);
console.log(num); // 23

// Symbol
let value = Symbol(23);
let num = Number(value);
console.log(num); // TypeError: Cannot convert a Symbol value to a number

// String
let valueWithEmptyString = "";
let num1 = Number(valueWithEmptyString);
console.log("valueWithEmptyString:", num1); // 0

let valueWithEmptySpace = " 123";
let num2 = Number(valueWithEmptySpace);
console.log("valueWithEmptySpace:", num2); // 123

let valueWithNumString = "123";
let num3 = Number(valueWithNumString);
console.log("valueWithNumString:", num3); // 123

let valueWithNumString2 = "123.456";
let num4 = Number(valueWithNumString2);
console.log("valueWithNumString2:", num4); // 123.456

let valueWithNumberStringAndChar = "123a";
let num5 = Number(valueWithNumberStringAndChar);
console.log("valueWithNumberStringAndChar:", num5); // NaN

let valueWithChar = "abc";
let num6 = Number(valueWithChar);
console.log("valueWithChar:", num6); // NaN

let valueWithInfinite = "Infinity";
let num7 = Number(valueWithInfinite);
console.log("valueWithInfinite:", num7); // Infinity

let valueWithNegaInfinite = "-Infinity";
let num8 = Number(valueWithNegaInfinite);
console.log("valueWithNegaInfinite:", num8); // -Infinity

let valueWithEmptySpacesBetweenChar = " 3 0 ";
let num9 = Number(valueWithEmptySpacesBetweenChar);
console.log("valueWithEmptySpacesBetweenChar:", num9); // NaN

let valueWithUniCode = "ğŸ˜€";
let num10 = Number(valueWithUniCode);
console.log("valueWithUniCode:", num10); // NaN

let valuewithUTF16 = "0x1A";
let num11 = Number(valuewithUTF16);
console.log("valuewithUTF16:", num11); // 26

// Object
let obj = {
  valueOf() {
    return 23;
  },
  toString() {
    return "Hello";
  },
};

const newObj = Number(Obj);
console.log(newObj); // 42

let obj = {
  toString() {
    return "Hello";
  },
};

const newObj = Number(Obj);
console.log(newObj); // NaN
```

#### è½‰æ›ç‚ºå­—ä¸² (ToString)

```js
// Undefined
let valueUndefined = undefined;
let str1 = String(valueUndefined);
console.log("valueUndefined:", str1); // "undefined"

let valueNull = null;
let str2 = String(valueNull);
console.log("valueNull:", str2); // "null"

let valueOfTrue = true;
let str3 = String(valueOfTrue);
console.log("valueOfTrue:", str3); // "true"

let valueOfFalse = false;
let str4 = String(valueOfFalse);
console.log("valueOfFalse:", str4); // "false"

let valueOfNumber = 123;
let str5 = String(valueOfNumber);
console.log("valueOfNumber:", str5); // "123"

let valueOfNaN = NaN;
let str6 = String(valueOfNaN);
console.log("valueOfNaN:", str6); // "NaN"

let valueOfInfinity = Infinity;
let str7 = String(valueOfInfinity);
console.log("valueOfInfinity:", str7); // "Infinity"

let valueOfNegativeZero = -0;
let str8 = String(valueOfNegativeZero);
console.log("valueOfNegativeZero:", str8); // "0"

let valueOfZero = 0;
let str9 = String(valueOfZero);
console.log("valueOfZero:", str9); // "0"

let valueOfNegativeNum = -123;
let str10 = String(valueOfNegativeNum);
console.log("valueOfNegativeNum:", str10); // "-123"

// Symbol
let greeting = Symbol("Hello");
console.log(String(greeting)); // Symbol(Hello) => string

let greeting = Symbol("Hello") + "World";
console.log(String(greeting)); // TypeError: Cannot convert a Symbol value to a string
```

> â—ï¸ é›–ç„¶ 0 å’Œ -0 åœ¨æ•¸å­—å‹åˆ¥æ™‚æ˜¯ä¸åŒçš„ï¼Œä½†ç•¶è½‰æ›ç‚ºå­—ä¸²æ™‚ï¼Œå…©è€…éƒ½æ˜¯ 0

### éš±å¼è½‰æ›ï¼ˆå¼·åˆ¶è½‰æ›ï¼‰Implicit Conversion (Coercion)

å‹åˆ¥å¼·åˆ¶è½‰æ›é€šå¸¸ç™¼ç”Ÿåœ¨å…©å€‹ä¸åŒå‹åˆ¥çš„å€¼åœ¨ä¸€å€‹æ“ä½œä¸­ä½¿ç”¨æ™‚ã€‚ä¸åŒçš„é‹ç®—å­æœƒä»¥å„ç¨®æ–¹å¼å°é‹ç®—å…ƒé€²è¡Œå‹åˆ¥è½‰æ›ï¼Œä»¥ç¢ºä¿æ“ä½œå¯ä»¥åŸ·è¡Œã€‚

#### é‹ç®—å­ï¼š:

- åŠ æ³• **(+)**
- æ¸›æ³• **(-)**
- ä¹˜æ³• **(\*)**
- é™¤æ³• **(/)**
- é¤˜æ•¸ **(%)**

##### åŠ æ³•

ç•¶å…¶ä¸­ä¸€å€‹é‹ç®—å…ƒæ˜¯å­—ä¸²æ™‚ï¼Œå¦ä¸€å€‹é‹ç®—å…ƒå°‡è¢«è½‰æ›ç‚ºå­—ä¸²ï¼Œä¸¦åŸ·è¡Œå­—ä¸²é€£æ¥ã€‚

```js
let result_1 = "5" + 2;
console.log(result_1); // 52 => string

let result_2 = 2 + "5";
console.log(result_2); // 25
```

{/* The conversion flow is like below: */}

{/* Addition.png */}

##### å…¶ä»–ç®—è¡“é‹ç®—å­ï¼š

å®ƒæœƒå¼·åˆ¶å°‡å­—ä¸²è½‰æ›ç‚ºæ•¸å­—ã€‚

```js
const result_1 = "5" - 2;
console.log(result_1); // 3

const result_2 = 2 - "5";
console.log(result_2); // -3

const result_3 = "6" * "2";
console.log(result_3); // 12

const result_4 = 12 / "6";
console.log(result_4); // 2;
```

##### é‚è¼¯

ç•¶ä½¿ç”¨å¯¬é¬†ç›¸ç­‰ï¼ˆ==ï¼‰æ™‚ï¼Œåœ¨æ¯”è¼ƒå‰æœƒåŸ·è¡Œå¼·åˆ¶è½‰æ›ã€‚
ç•¶ä½¿ç”¨åš´æ ¼ç›¸ç­‰ï¼ˆ===ï¼‰æ™‚ï¼Œå‹åˆ¥æ¯”è¼ƒå„ªå…ˆï¼Œå¦‚æœå‹åˆ¥ä¸åŒï¼Œå‰‡è¿”å› falseã€‚

```js
// å¯¬é¬†ç›¸ç­‰
console.log("5" == 5); // true;

// åš´æ ¼ç›¸ç­‰
console.log("5" === 5); // false
```

{/* The flow is like below: */}

{/* logic.png */}

##### é‚è¼¯ OR å’Œé‚è¼¯ AND

é‹ç®—å…ƒæœƒè¢«è½‰æ›ç‚ºå¸ƒæ—å€¼ä»¥é€²è¡Œé‚è¼¯æ“ä½œã€‚

```js
// OR(||)
console.log(0 || "hello"); // "hello"

// AND(&&)
console.log(0 && "hello"); // 0
```

{/* The flow is like below: */}

{/* and_or.png */}

> åœ¨ JavaScript ä¸­ï¼Œ**&& (AND)** å’Œ **|| (OR)** é‚è¼¯é‹ç®—å­éƒ½ä½¿ç”¨[çŸ­è·¯æ±‚å€¼ï¼ˆæœ€å°åŒ–æ±‚å€¼ï¼‰](https://zh.wikipedia.org/wiki/%E7%9F%AD%E8%B7%AF%E6%B1%82%E5%80%BC)ã€‚ä»¥ä¸‹æ˜¯æ›´è©³ç´°çš„è§£é‡‹ï¼š
>
> - **OR (||) é‹ç®—å­**ï¼šå¦‚æœç¬¬ä¸€å€‹åƒæ•¸è©•ä¼°ç‚º trueï¼Œå‰‡æ•´é«”çµæœç‚º trueï¼Œä¸æœƒè©•ä¼°ç¬¬äºŒå€‹åƒæ•¸ã€‚
>
> - **AND (&&) é‹ç®—å­**ï¼šå¦‚æœç¬¬ä¸€å€‹åƒæ•¸è©•ä¼°ç‚º falseï¼Œå‰‡æ•´é«”çµæœç‚º falseï¼Œä¸æœƒè©•ä¼°ç¬¬äºŒå€‹åƒæ•¸ã€‚

##### é‚è¼¯ NOT

é‹ç®—å…ƒæœƒè¢«è½‰æ›ç‚ºå¸ƒæ—å€¼ï¼Œç„¶å¾Œå–ç›¸åå€¼ã€‚

```js
console.log(!0); // true
```

{/* The flow is like below: */}

{/* not.png */}

## è©¦ä¸€è©¦ï¼å‹åˆ¥è½‰æ›å•é¡Œï¼ˆç”± GPT å»ºç«‹ï¼‰

1. è§£é‡‹å¦‚ä½•é¡¯å¼åœ°å°‡ä¸åŒå‹åˆ¥è½‰æ›ç‚ºå­—ä¸²ã€æ•¸å­—å’Œå¸ƒæ—å€¼ï¼Œä¸¦æä¾›ç¯„ä¾‹ç¨‹å¼ç¢¼ã€‚

```js
let num = 123;
let strNum = String(num);
let strNum2 = num.toString();

let str = "456";
let numStr = Number(str);
let numStr2 = parseInt(str);

let bool = true;
let numBool = Number(bool);
let boolNum = Boolean(numBool);
```

2. è§£é‡‹ä»€éº¼æ˜¯éš±å¼å‹åˆ¥è½‰æ›ï¼Œä¸¦æä¾›å®ƒç™¼ç”Ÿçš„ä¾‹å­ã€‚

```js
console.log("5" - 2);
console.log("5" + 2);
console.log(1 + true);
console.log("5" * "2");
```

3. è§£é‡‹ `==` å’Œ `===` çš„å€åˆ¥ï¼Œä¸¦æä¾›ä½•æ™‚ä½¿ç”¨å®ƒå€‘çš„ä¾‹å­ã€‚

```js
console.log("5" == 5);
console.log("5" === 5);

console.log(null == undefined);
console.log(null === undefined);
```

4. è§£é‡‹ç‚ºä»€éº¼ "0" == false çš„çµæœæ˜¯ trueï¼Œè€Œ "0" === false çš„çµæœæ˜¯ falseã€‚

```js
console.log("0" == false);
console.log("0" === false);
```

5. è§£é‡‹ç•¶æ•¸å­—å’Œå­—ä¸²æ··åˆåœ¨ç®—è¡“é‹ç®—ä¸­æ™‚æœƒç™¼ç”Ÿä»€éº¼ï¼Œä¸¦æä¾›ä¾‹å­ã€‚

```js
console.log("5" + 2);
console.log("5" - 2);
console.log("5" * 2);
console.log("5" / 2);
```

6. è§£é‡‹å“ªäº›å€¼åœ¨æ¢ä»¶èªå¥ä¸­æœƒè¢«è½‰æ›ç‚º falseï¼Œå“ªäº›æœƒè¢«è½‰æ›ç‚º trueã€‚

```js
if (0) {
  console.log("This won't be logged");
} else {
  console.log("0 is falsy");
}

if ("") {
  console.log("This won't be logged");
} else {
  console.log('"" is falsy');
}

if (1) {
  console.log("1 is truthy");
}

if ("hello") {
  console.log('"hello" is truthy');
}
```

## åƒè€ƒè³‡æ–™ï¼š

- [Equality comparisons and sameness](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Equality_comparisons_and_sameness)
- [ECMAScriptâ€Š-â€ŠType Conversion](https://tc39.es/ecma262/#sec-type-conversion)
